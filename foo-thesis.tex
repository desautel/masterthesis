%\documentclass[ngerman,oneside]{cgsthesis}
\documentclass{cgsthesis}

\usepackage{fontspec}

% Configure Biblatex
\usepackage[defernumbers=true,natbib=true,backend=biber,
    maxbibnames=9,maxcitenames=1,style=authoryear,citestyle=authoryear,uniquelist=false]{biblatex}

% bug workaround, see http://tex.stackexchange.com/questions/311426/bibliography-error-use-of-blxbblverbaddi-doesnt-match-its-definition-ve
\makeatletter
\def\blx@maxline{77}
\makeatother

\DeclareBibliographyCategory{cited}
\DeclareBibliographyCategory{supplementary}
\AtEveryCitekey{\addtocategory{cited}{\thefield{entrykey}}}
\newcommand{\citesupplementary}[1]{\nocite{#1}\addtocategory{supplementary}{#1}}
\DefineBibliographyStrings{ngerman}{
  andothers = {\emph{et~al\adddot}}
}
\DefineBibliographyStrings{english}{
  andothers = {\emph{et~al\adddot}}
}
\addbibresource{foo-thesis.bib}
\AtEveryBibitem{\clearlist{location}}
\AtEveryBibitem{\clearfield{address}}
\AtEveryBibitem{\clearfield{doi}}

% Code listings

\usepackage{listings}
\lstloadlanguages{C++}
\usepackage{glsl}

% Thesis development


\usepackage{cgsparagraphclassification}

\usepackage[colorinlistoftodos]{todonotes}
\usepackage{outlines}
\usepackage{enumitem}
\usepackage{cleveref}
\usepackage{tabulary}
\usepackage{bm}
\setlist{itemsep=2pt,parsep=2pt}
% \setlist{topsep=0px,partopsep=0px}
% \setlist{nolistsep}

% Title page

\logo{graphics/logo_black}

\title{Design and Implementation of a Many-Light Method for Real-Time Dynamic Global Illumination}
%\subtitle{Untertitel} % z.B. englischer Titel bei Bachelorarbeit

%\subject{%
%    Bachelorarbeit\\
%    zur Erlangung des akademischen Grades\\
%    "Bachelor of Science"\\
%    (B.Sc.)\\
%    im Studiengang IT-Systems Engineering\\
%    des	 Hasso-Plattner-Instituts an der\\
%    Universit\"at Potsdam
%    \vfill
%    vorgelegt von}

\subject{%
   Masterarbeit\\
   zur Erlangung des akademischen Grades\\
   "Master of Science"\\
   (M.Sc.)\\
   im Studiengang IT-Systems Engineering\\
   des	 Hasso-Plattner-Instituts an der\\
   Universit\"at Potsdam
   \vfill
   vorgelegt von}

% \subject{%
%     Dissertation\\
%     zur Erlangung des akademischen Grades\\
%     "doctor rerum naturalium"\\
%     (Dr.\ rer.\ nat.)\\
%     in der Wissenschaftsdisziplin Informatik
%     \vfill
%     eingereicht an der\\
%     Mathematisch-Naturwissenschaftlichen Fakult\"at\\
%     der Universit\"at Potsdam\\
%     \vfill
%     von}

\author{Johannes Linke}

\publishers{%
    Aufgabenstellung und Anleitung:\\
    Prof.\ Dr.\ J\"urgen D\"ollner\\
    Daniel Limberger}

\place{Potsdam}
\date{\begin{otherlanguage}{ngerman} \today \end{otherlanguage}}


\begin{document}

\frontmatter

\maketitle

\tableofcontents

\include{preface}

\mainmatter
\include{chap-introduction}
\include{chap-introductionGI}
\include{chap-concept}
\include{chap-implementation}
\include{chap-results}
\include{chap-conclusion}

\chapter{Todos}

\subsubsection{figures}

\todo[inline]{make figures nicer}

\todo[inline]{implementation pipeline \ref{fig:RenderingPipelineOverview} adds little value over concept pipeline.}

\todo[inline]{nicer \Cref{fig:results:RSMBuffers}, maybe only one large divided in thirds, or zoomins}

\todo[inline]{Pipeline figures for all sections in implementation. e.g. create RSM, which is then sampled, and the samples are put into two buffers.}

\todo[inline]{Interleaved shading algorithm figure comparing buffer splitting vs compute shaders in addition to pipeline figure \Cref{sec:impl:interleavedShading}}

\todo[inline]{Temporal coherence/frame-to-frame diff when light moves figure. end of \Cref{sec:results:RsmAndVplSampling}}

\todo[inline]{more debug views, debug data visualizations}
\todo[inline]{daniel's pipeline visualizations, see emails}


\subsubsection{content}

\todo[inline]{nicer, less structure-in-your-face introduction in \Cref{sec:intro:gi:components}, in order to ... it is necessary to have an understanding of...}

\todo[inline]{more conclusion by adding summaries of the approaches, how did we come to these conclusions, we've been able to show...}

\todo[inline]{abstract and zusammenfassung}

\todo[inline]{Lui: summaries at the end of chapters}

\todo[inline]{Lui: replace "this chapter will ..." by introductory sentences from first section}

\todo[inline]{Lui: more references on first few pages}

\todo[inline]{some closing remarks. add some personal evaluations, broad statement about complexity}

\todo[inline]{summarize ISM deficits in ISM discussion \Cref{sec:results:ism:discussion}}

\todo[inline]{do some pseudocode}

\todo[inline]{put VPL shuffling comparison anywhere, maybe results \Cref{sec:results:ism:quality}}

\todo[inline]{4k tests}

\todo[inline]{ISM quality: for single-pixel-renderer: maybe show one full-size shadow map to show this *can* work. \Cref{sec:results:ism:quality}}

\todo[inline,color=yellow]{ISMs: point count for splat renderer and output them somehow. \Cref{sec:results:ism:quality}}

\todo[inline]{ISM comparison: Add notes about scaling when i have point counts \Cref{sec:results:ism:comparison}}

\todo[inline]{ISM performance: Numbers when enlarging the points / making them smaller. Discuss. Note how the single-pixel renderer is (hopefully) not affected by point size. \Cref{sec:results:ism:quality}}

\todo[inline]{ISM quality / performance: Screenshots and performance numbers when doing more points. either by tessellation or by collecting more. Discuss. \Cref{sec:results:ism:quality}}



\subsubsection{code}

\todo[inline,color=yellow]{implement some moving object. show temporal coherency when it moves. or even moving spherical light. \Cref{sec:results:ism}}

\todo[inline,color=yellow]{investigate into interleaving via shared memory in 2x2 groups (that is, one work group reads 2x2 interleaved pixels instead of one)}

\todo[inline,color=yellow]{implement ISM max quality. every point into every ISM. likely render everything once for each ISM. a checkbox: when checked, compute high-quality once and do not change. back to normal when unchecked. \Cref{sec:results:ism:quality}}

\todo[inline,color=yellow]{ISM performance: Impact of packing? \Cref{sec:results:ism:performanceSinglePixelRenderer}}


\subsubsection{misc}

\todo[inline]{repository readme}


\todo[inline]{brighter version for print}
\todo[inline]{noindent after figures}
\todo[inline]{latex warnings}
\todo[inline]{esp. overflows}
\todo[inline]{orphans and widows, also single words on a line}


% \include{chap-examples}
% \include{chap-moreexamples}

% force line breaks inside URLs
\setcounter{biburllcpenalty}{7000}
\setcounter{biburlucpenalty}{8000}

\printbibliography[title={Bibliography},category=cited,heading=bibintoc]

% Further Reading
% \citesupplementary{Alvarez.etal-1992}
% \printbibliography[title={Weiterf{"u}hrende Literatur},category=supplementary,resetnumbers=true,heading=bibintoc]

% Debug: uncited
\nocite{*}
\printbibliography[title={Uncited},notcategory=cited,resetnumbers=true,heading=bibintoc]

\appendix
% \include{appn1}

\backmatter

\include{statutorydeclaration}

\end{document}
